--NAME--
REST HTML ls_queues
--SHELL--
delilah ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV}  -command remove_all_stream 2> /dev/null
delilah ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV}  -command "add_stream_operation o1 txt.parser_words input words" 2> /dev/null
delilah ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV}  -command "add_stream_operation o2 txt.word_count_accumulate words words_count words_count" 2> /dev/null
delilah ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV}  -command "push input.txt input"
delilah ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV}  -command flush_buffers
delilah ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV}  -command "wait"
curl http://localhost:${SAMSON_WORKER_WEB_PORT_ENV}/samson/queues.html
--EXPECT--
<html><body><style>#table-5{font-family:"Lucida Sans Unicode", "Lucida Grande", Sans-Serif;font-size:12px;background:#fff;border-collapse:collapse;text-align:left;margin:20px;}#table-5 th{font-size:14px;font-weight:normal;color:#039;border-bottom:2px solid #6678b1;padding:10px 8px;}#table-5 td{color:#669;padding:9px 8px 0;}#table-5 tbody tr:hover td{color:#009;}</style><table id="table-5"><tr><td colspan="6"><h1>ls -group name -sort name</h1></td></tr><th>worker_id</th><th>name</th><th>#kvs</th><th>size</th><th>key</th><th>value</th><tr><td>0</td><td>words_count</td><td> 10.0 </td><td>  110 </td><td>system.String</td><td>system.UInt</td></tr><tr><td>0</td><td>words</td><td>    0 </td><td>    0 </td><td>system.String</td><td>system.UInt</td></tr><tr><td>0</td><td>input</td><td>    0 </td><td>    0 </td><td>txt</td><td>txt</td></tr></table></body></html>
