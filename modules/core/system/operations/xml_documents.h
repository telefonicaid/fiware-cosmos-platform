
/**
 File autogenerated with samsonModuleParser. Please, edit to complete this operation
*/

#ifndef _H_SAMSON_system_xml_documents
#define _H_SAMSON_system_xml_documents


#include <samson/module/samson.h>


namespace samson{
namespace system{


	class xml_documents : public samson::Splitter
	{

	public:


//  INFO_MODULE
// If interface changes and you do not recreate this file, you will have to update this information (and of course, the module file)
// Please, do not remove this comments, as it will be used to check consistency on module declaration
//
//  
// helpLine: Do not break xml documents
//  END_INFO_MODULE



		int split( char * inData, size_t inLength , bool finished , char ** nextData , SplitterEmitter* emitter )
		{

		   size_t pos_begin = 0;
		   size_t pos = 1;

		   while( pos < inLength )
		   {
			  
			  if( strncmp( &inData[pos] , "<?xml",  inLength - pos ) == 0 )
			  {

				 if( strncmp( &inData[pos_begin] , "<?xml",  inLength - pos ) == 0 )
					emitter->emit( &inData[pos_begin] , pos - pos_begin );

				 pos_begin = pos;
				 pos = pos_begin+1;

			  }
			  else
				 pos++;
		   }

		   
		   if( finished )
		   {
			  if( strncmp( &inData[pos_begin] , "<?xml",  inLength - pos ) == 0 )
				 emitter->emit( &inData[pos_begin] , pos - pos_begin );
			  *nextData = NULL;
			  return 0;
		   }
		   
		   *nextData = &inData[pos];

		   return 0;
		}

	};


} // end of namespace system
} // end of namespace samson

#endif
