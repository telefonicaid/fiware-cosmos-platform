--NAME--
REST XML ls_queues
--SHELL--
delilah  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV} -command remove_all_stream 2> /dev/null
delilah  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV} -command "add_stream_operation o1 txt.parser_words input words" 2> /dev/null
delilah  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV} -command "add_stream_operation o2 txt.word_count_accumulate words words_count words_count" 2> /dev/null
delilah  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV} -command "push input.txt input"
delilah  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV} -command flush_buffers
delilah  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST} ${SAMSON_WORKER_PORT_ENV} -command wait
curl http://localhost:${SAMSON_WORKER_WEB_PORT_ENV}/samson/queues.xml
--EXPECT--
<?xml version="1.0" encoding="UTF-8"?>
<!-- SAMSON Rest interface -->
<samson>
<table><title><![CDATA[ls -group name -sort name]]></title><item><property><name><![CDATA[worker_id]]></name><value><![CDATA[0]]></value></property><property><name><![CDATA[name]]></name><value><![CDATA[words_count]]></value></property><property><name><![CDATA[#kvs]]></name><value><![CDATA[ 10.0 ]]></value></property><property><name><![CDATA[size]]></name><value><![CDATA[  110 ]]></value></property><property><name><![CDATA[key]]></name><value><![CDATA[system.String]]></value></property><property><name><![CDATA[value]]></name><value><![CDATA[system.UInt]]></value></property></item><item><property><name><![CDATA[worker_id]]></name><value><![CDATA[0]]></value></property><property><name><![CDATA[name]]></name><value><![CDATA[words]]></value></property><property><name><![CDATA[#kvs]]></name><value><![CDATA[    0 ]]></value></property><property><name><![CDATA[size]]></name><value><![CDATA[    0 ]]></value></property><property><name><![CDATA[key]]></name><value><![CDATA[system.String]]></value></property><property><name><![CDATA[value]]></name><value><![CDATA[system.UInt]]></value></property></item><item><property><name><![CDATA[worker_id]]></name><value><![CDATA[0]]></value></property><property><name><![CDATA[name]]></name><value><![CDATA[input]]></value></property><property><name><![CDATA[#kvs]]></name><value><![CDATA[    0 ]]></value></property><property><name><![CDATA[size]]></name><value><![CDATA[    0 ]]></value></property><property><name><![CDATA[key]]></name><value><![CDATA[txt]]></value></property><property><name><![CDATA[value]]></name><value><![CDATA[txt]]></value></property></item></table>
</samson>

