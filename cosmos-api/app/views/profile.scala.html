@(oauthProfile: es.tid.cosmos.api.auth.oauth2.OAuthUserProfile,
  cosmosProfile: es.tid.cosmos.api.profile.CosmosProfile,
  tabs: Seq[views.NavTab])(implicit request: RequestHeader)
@import es.tid.cosmos.api.controllers.pages
@import es.tid.cosmos.api.profile.NamedKey
@import es.tid.cosmos.api.profile.UserState
<!--
 Telefónica Digital - Product Development and Innovation

 THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND,
 EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE.

 Copyright (c) Telefónica Investigación y Desarrollo S.A.U.
 All rights reserved.
 -->
@main("Cosmos user profile") {
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/profile.css")">
    <script type="text/javascript" src="@routes.Assets.at("js/profile.js")"></script>
} {
    @navigation("profile", tabs)

    @if(cosmosProfile.state == UserState.Creating) {
        <p><i>Your profile is being created</i>. You won't be allowed to create clusters for a
        few minutes.</p>
    }

    <h1 class="page-title">Profile for @oauthProfile.contact</h1>

    <ul>
        <li>User handle: <strong id="handle">@cosmosProfile.handle</strong></li>
        <li>Email address:
            <strong id="email">@cosmosProfile.email</strong>
            <a id="edit-email" class="edit-link" href="#">[edit]</a>
            @for(email <- oauthProfile.email) {
                <a id="sync-email" class="edit-link" href="#" style="display: none"
                   data-oauth-email="@email">
                    [reset to @email]
                </a>
            }
            <div id="edit-email-area" style="display: none">
                <input id="new-email"/>
                <input type="submit" class="submit" value="Update"/>
                <a class="cancel-edit" href="#">Cancel</a>
                <div id="email-error" class="edit-error" style="display: none"></div>
            </div>
        </li>
        <li>Public keys
            @for(NamedKey(name, signature) <- cosmosProfile.keys) {
                <div class="key noedit" data-name="@name">
                    <a class="edit-key edit-link" href="#">edit</a>
                    <div class="name">@name</div>
                    <div class="signature">@signature</div>
                    <form id="form-key-@name">
                        <p><strong>Warning!</strong> This key change will be in effect only for
                        newly created clusters. Existing ones won't be updated.</p>

                        <dl>
                            <dt><label>New key:</label></dt>
                            <dd>
                                <textarea></textarea>
                                <div class="edit-key-error edit-error" style="display: none"></div>
                            </dd>
                        </dl>

                        <input type="submit" class="submit" value="Update"/>
                        <a class="cancel-edit" href="#">Cancel</a>
                    </form>
                </div>
            }
        </li>
        <li>Credentials
            <table>
                <tbody>
                    <tr>
                        <th>API key</th>
                        <td>@cosmosProfile.apiCredentials.apiKey</td>
                    </tr>
                    <tr>
                        <th>API secret</th>
                        <td>@cosmosProfile.apiCredentials.apiSecret</td>
                    </tr>
                </tbody>
            </table>
        </li>
    </ul>

    <p>
        <strong>Next steps!</strong> Learn how to
        <a href="@pages.routes.Pages.customGettingStarted()">get started</a>.
    </p>
}
